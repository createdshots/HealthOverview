<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HealthOverview</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Leaflet CSS for maps -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <!-- External Config File -->
    <script src="firebaseConfig.js"></script>
    <script type="module" src="/js/auth.js"></script>
    <script type="module" src="/js/app.js"></script> <!-- Fixed path -->
</head>

<body class="bg-gray-50 text-gray-800">

    <!-- Improved Warning Box - Moved to Top -->
    <div
        class="mt-4 mb-8 max-w-3xl mx-auto flex items-start gap-4 bg-yellow-50 border-l-8 border-yellow-400 shadow-md rounded-xl p-5 fade-in-warning relative">
        <div class="text-3xl text-yellow-500 mt-1 mr-2">⚠️</div>
        <div>
            <div class="font-bold text-yellow-900 text-lg mb-1">A Note for Our Community</div>
            <div class="text-yellow-900 text-sm leading-relaxed">
                <span class="font-semibold">Please understand: This is an unfinished and work-in-progress project.</span>
                This is a personal project designed for the chronically ill community to find a little bit of fun and a sense of accomplishment in their health journey.
                <span class="font-semibold">Please do not misuse health services for the purpose of checking off locations.</span>
                Your health and the resources of the NHS are paramount.
            </div>
        </div>
    </div>

    <!-- App Title - Moved Below Warning -->
    <header class="text-center mb-8 relative">
        <h1 class="text-4xl font-bold text-gray-900 mt-4 mb-1">HealthOverview</h1>
        <p class="text-lg text-gray-600 mb-2">Check off hospitals and ambulance trusts you've visited.</p>
        <!-- Logout Button - positioned in top right corner -->
        <button id="logout-btn" class="absolute top-4 right-4 bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-200">
            Logout
        </button>
    </header>

    <!-- Personalized Greeting -->
    <div id="personal-greeting" class="text-2xl font-semibold text-purple-700 text-center mt-2 mb-2"></div>

    <!-- Full Page Loader -->
    <div id="full-page-loader"
        class="fixed inset-0 bg-gray-900 bg-opacity-75 flex flex-col items-center justify-center z-50 transition-opacity duration-500 loader-hidden">
        <svg class="animate-spin h-10 w-10 text-white mb-4" viewBox="0 0 24 24">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor"
                d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">
            </path>
        </svg>
        <p id="loader-text" class="text-white text-lg">Loading data...</p>
    </div>

    <!-- Auth Buttons -->
    <div class="fixed top-4 right-4 z-20">
        <div id="auth-signed-out-view" class="flex flex-col items-end space-y-2">
            <button id="google-signin-btn"
                class="bg-white text-gray-700 font-semibold py-2 px-4 border border-gray-300 rounded-lg shadow-md hover:bg-gray-50 transition-colors flex items-center w-full justify-center">
                <svg class="w-5 h-5 mr-2" viewBox="0 0 48 48">
                    <path fill="#4285F4"
                        d="M43.611 20.083H42V20H24v8h11.303c-1.649 4.657-6.08 8-11.303 8c-6.627 0-12-5.373-12-12s5.373-12 12-12c3.059 0 5.842 1.154 7.961 3.039l5.657-5.657C34.046 6.053 29.268 4 24 4C12.955 4 4 12.955 4 24s8.955 20 20 20s20-8.955 20-20c0-1.341-.138-2.65-.389-3.917z">
                    </path>
                    <path fill="#34A853"
                        d="M6.306 14.691l6.571 4.819C14.655 15.108 18.961 12 24 12c3.059 0 5.842 1.154 7.961 3.039l5.657-5.657C34.046 6.053 29.268 4 24 4C16.318 4 9.656 8.337 6.306 14.691z">
                    </path>
                    <path fill="#FBBC05"
                        d="M27.461 44.5l5.657-5.657C30.485 41.658 27.214 44 24 44c-5.166 0-9.558-2.922-11.481-7.281l-6.571 4.819C9.656 40.663 16.318 44 24 44z">
                    </path>
                    <path fill="#EA4335"
                        d="M43.611 20.083H42V20H24v8h11.303c-.792 2.237-2.231 4.166-4.087 5.571l5.657 5.657C42.485 36.678 44 31.888 44 24c0-1.341-.138-2.65-.389-3.917z">
                    </path>
                </svg>
                Sign in with Google
            </button>
            <button id="anon-signin-btn"
                class="bg-gray-600 text-white font-semibold py-2 px-4 border border-gray-600 rounded-lg shadow-md hover:bg-gray-700 transition-colors w-full">Continue
                as Guest</button>
        </div>
        <div id="auth-signed-in-view" class="hidden items-center">
            <span id="user-id-display" class="text-sm text-gray-600 bg-white p-2 rounded-l-lg border-r-0 border"></span>
            <button id="signout-btn"
                class="bg-red-500 text-white font-semibold py-2 px-4 rounded-r-lg shadow-md hover:bg-red-600 transition-colors">Sign
                Out</button>
        </div>
    </div>


    <div class="container mx-auto p-4 md:p-8 max-w-7xl">

        <div class="mt-6 flex justify-center space-x-2 flex-wrap">
            <button id="show-stats-btn"
                class="bg-indigo-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-indigo-700 transition-colors">Show
                Charts</button>
            <button id="show-map-btn"
                class="bg-teal-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-teal-700 transition-colors">Show
                Map</button>
            <button id="show-awards-btn"
                class="bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 transition-colors">Show
                Awards</button>
            <button id="add-record-btn"
                class="bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700 transition-colors hidden">Add
                Record</button>
            <button id="show-profile-btn"
                class="bg-purple-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-purple-700 transition-colors hidden">My
                Profile</button>
        </div>
        <div id="status-message-area" class="mt-4 h-6"></div>

        <div id="recent-activity-container"></div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <!-- Hospitals Column -->
            <div class="bg-white p-6 rounded-xl shadow-md flex flex-col">
                <h2 class="text-2xl font-semibold mb-4 text-gray-800">Hospitals</h2>
                <input type="text" id="hospital-search" placeholder="Search hospitals..."
                    class="w-full p-2 border border-gray-300 rounded-lg mb-4">
                <div id="hospitals-stats" class="mb-4"></div>
                <div id="hospitals-list" class="space-y-3 flex-grow overflow-y-auto custom-scrollbar pr-2"></div>
            </div>

            <!-- Ambulance Trusts Column -->
            <div class="bg-white p-6 rounded-xl shadow-md flex flex-col">
                <h2 class="text-2xl font-semibold mb-4 text-gray-800">Ambulance Trusts</h2>
                <input type="text" id="ambulance-search" placeholder="Search trusts..."
                    class="w-full p-2 border border-gray-300 rounded-lg mb-4">
                <div id="ambulance-stats" class="mb-4"></div>
                <div id="ambulance-list" class="space-y-3 flex-grow overflow-y-auto custom-scrollbar pr-2"></div>
            </div>
        </div>
    </div>

    <!-- Modals Container -->
    <div id="modal-container"></div>

    <footer class="fixed bottom-4 right-4 z-10">
        <div class="flex flex-col items-end space-y-2">
            <!-- Help Button -->
            <button id="help-btn"
                class="bg-gray-600 text-white px-3 py-2 rounded-lg hover:bg-gray-700 transition-colors text-sm shadow-lg">
                ❓ Help
            </button>

            <!-- Creator Credit -->
            <a href="https://github.com/createdshots" target="_blank" rel="noopener noreferrer"
                class="flex items-center text-xs text-gray-400 hover:text-gray-600 bg-white px-2 py-1 rounded shadow">
                <svg class="w-3 h-3 mr-1" viewBox="0 0 16 16" fill="currentColor" aria-hidden="true">
                    <path fill-rule="evenodd"
                        d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
                    </path>
                </svg>
                Jack Tolley
            </a>
        </div>
    </footer>

</body>

</html>